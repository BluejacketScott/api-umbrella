#!/usr/bin/env bash

set -e -u -x
source ./tasks/helpers.sh

cue_version="0.11.2"
cue_hash="cb9391bbea35cffbec8992f6f5816dea71919f8cfc5e5f201cd87bfc47e0bac6"
if [ "$TARGETARCH" == "arm64" ]; then
  cue_hash="2094660133df37981e3f40973f065e9bdcab1413f79b9b7cb705d9b5eaef3df4"
fi

task_working_dir
download "https://github.com/cue-lang/cue/releases/download/v${cue_version}/cue_v${cue_version}_linux_${TARGETARCH}.tar.gz" "sha256" "$cue_hash"
extract_download "cue_v${cue_version}_linux_${TARGETARCH}.tar.gz"

install -D -m 755 "cue" "$STAGE_EMBEDDED_DIR/bin/cue"

stamp
